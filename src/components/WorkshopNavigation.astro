---
// Workshop Navigation Component
// Handles smooth scrolling and highlighting of workshop sections
---

<script>
  // Global function to scroll to specific workshop sections
  window.scrollToWorkshop = function(workshopType) {
    console.log('Scrolling to workshop:', workshopType);
    
    // First navigate to home page if not already there
    if (window.location.pathname !== '/') {
      window.location.href = `/#offerings-${workshopType}`;
      return;
    }
    
    // Find the offerings section
    const offeringsSection = document.getElementById('offerings');
    if (!offeringsSection) {
      console.warn('Offerings section not found');
      return;
    }
    
    // Smooth scroll to the offerings section
    offeringsSection.scrollIntoView({ 
      behavior: 'smooth', 
      block: 'start' 
    });
    
    // Add highlighting effect after scroll
    setTimeout(() => {
      highlightWorkshop(workshopType);
    }, 800);
  };
  
  function highlightWorkshop(workshopType) {
    // Remove any existing highlights
    const allWorkshopCards = document.querySelectorAll('.workshop-card');
    allWorkshopCards.forEach(card => {
      card.classList.remove('workshop-highlight');
    });
    
    // Find and highlight the specific workshop
    const workshopSelectors = {
      '3day': '[data-workshop-id="prod-3day"], .workshop-card:has([data-workshop-id="prod-3day"])',
      '5day': '[data-workshop-id="prod-5day"], .workshop-card:has([data-workshop-id="prod-5day"])'
    };
    
    const selector = workshopSelectors[workshopType];
    if (selector) {
      const workshopElement = document.querySelector(selector) || 
                             document.querySelector(`.workshop-card:nth-child(${workshopType === '3day' ? '1' : '2'})`);
      
      if (workshopElement) {
        workshopElement.classList.add('workshop-highlight');
        
        // Remove highlight after 3 seconds
        setTimeout(() => {
          workshopElement.classList.remove('workshop-highlight');
        }, 3000);
      }
    }
  }
  
  // Add CSS for highlight effect
  if (!document.getElementById('workshop-navigation-styles')) {
    const style = document.createElement('style');
    style.id = 'workshop-navigation-styles';
    style.textContent = `
      .workshop-highlight {
        transform: scale(1.02) !important;
        box-shadow: 0 0 30px rgba(147, 51, 234, 0.6) !important;
        border: 2px solid rgba(147, 51, 234, 0.8) !important;
        transition: all 0.3s ease !important;
      }
      
      .workshop-highlight::before {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(45deg, #9333ea, #7c3aed, #6366f1, #3b82f6);
        border-radius: inherit;
        z-index: -1;
        animation: workshop-glow 2s ease-in-out infinite alternate;
      }
      
      @keyframes workshop-glow {
        0% { opacity: 0.5; transform: scale(1); }
        100% { opacity: 0.8; transform: scale(1.01); }
      }
    `;
    document.head.appendChild(style);
  }
</script> 